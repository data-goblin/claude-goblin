# Version 0.1.8 - Zero Percent Fix

Released: October 20, 2025

## Overview

This release fixes a parsing bug where commands would fail when usage limits were at 0%, and adds pricing support for Claude Haiku 4.5.

## Bug Fixes

### Limits Parsing at 0%

**Problem:** When Opus or other limits were at 0%, `ccg limits` and `ccg status-bar` would fail with a regex parsing error.

Claude Code's `/usage` output changed behavior - it no longer displays reset times for limits at 0%:

```
# Before (with usage):
Opus weekly: 15% (resets in 3 days)

# Now (at 0%):
Opus weekly: 0%
```

The regex expected a reset time, causing the parse to fail.

**Solution:** Updated parsing logic to handle missing reset times gracefully:

```python
# Now handles both formats:
# "15% (resets in 3 days)" -> pct=15, reset="3 days"
# "0%" -> pct=0, reset=None
```

### Claude Haiku 4.5 Pricing

**Problem:** Model ID `claude-haiku-4-5-20251001` was not recognized, causing cost calculations to be inaccurate.

**Solution:** Added Haiku 4.5 pricing:
- Input: $1.00 per million tokens
- Output: $5.00 per million tokens

## Technical Changes

- Updated regex patterns in `limits.py` to make reset time capture group optional
- Added `claude-haiku-4-5-20251001` to model pricing table in cost calculations
- Both `ccg limits` and `ccg status-bar` now handle 0% limits without crashing

## Upgrading

```bash
pip install --upgrade claude-goblin
```

## Files Modified

- `src/commands/limits.py` - Updated regex for optional reset times
- `src/aggregation/cost_analysis.py` - Added Haiku 4.5 pricing
- `CHANGELOG.md` - Version 0.1.8 entry
- `pyproject.toml` - Version bump to 0.1.8
