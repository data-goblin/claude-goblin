# Version 0.1.4 - Anonymization & Audio Hooks

Released: October 12, 2025

## Overview

This release adds project anonymization for privacy-conscious sharing and expands audio hook support with PreCompact notifications.

## New Features

### Project Anonymization

New `--anon` flag for the `usage` command anonymizes project names:

```bash
ccg usage --anon
```

Projects display as `project-001`, `project-002`, etc., ranked by token usage (highest first). Useful for sharing dashboards without revealing project names.

### PreCompact Audio Hook

Audio notifications now support three hook types:

| Hook | Trigger | Use Case |
|------|---------|----------|
| Stop | Claude finishes responding | Know when ready for input |
| Notification | Claude requests permission | Don't miss permission prompts |
| PreCompact | Before conversation compaction | Warning before context summarization |

Setup now prompts for three sounds:

```bash
ccg setup-hooks audio
# Select sounds for: completion, permission, compaction
```

### Multi-Hook Selection

Seven configuration options for audio hooks:

1. Notification only (default)
2. Stop only
3. PreCompact only
4. Notification + Stop
5. Notification + PreCompact
6. Stop + PreCompact
7. All three

## Bug Fixes

### AttributeError in --anon Flag

**Problem:** `--anon` flag crashed with `AttributeError` when accessing `total_tokens` on UsageRecord objects.

**Solution:** Fixed attribute access to use correct property path for token totals.

## Technical Changes

- Added `--anon` flag to `usage` command with project ranking logic
- Extended audio hook configuration to support PreCompact hook type
- TTS hook script now handles different hook types with appropriate messages
- Enhanced hook removal to clean up PreCompact hooks

## Upgrading

```bash
pip install --upgrade claude-goblin
```

To reconfigure audio hooks with new options:

```bash
ccg remove-hooks audio
ccg setup-hooks audio
```

## Files Modified

- `src/commands/usage.py` - Added `--anon` flag and anonymization logic
- `src/hooks/audio.py` - Added PreCompact support and multi-hook selection
- `src/hooks/manager.py` - Enhanced removal for PreCompact hooks
- `CHANGELOG.md` - Version 0.1.4 entry
- `pyproject.toml` - Version bump to 0.1.4
